<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tket: src/Placement/GraphPlacement.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tket
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_56a38258b01f57376a0eb0ddf1115d22.html">Placement</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">GraphPlacement.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="GraphPlacement_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright Quantinuum</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">//</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">//</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">//</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">// limitations under the License.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="Placement_8hpp.html">tket/Placement/Placement.hpp</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="GraphPlacement_8cpp.html#acfc0968dc9a49c416d02cc7f519714dc">   19</a></span><span class="keyword">typedef</span> std::chrono::steady_clock <a class="code hl_typedef" href="GraphPlacement_8cpp.html#acfc0968dc9a49c416d02cc7f519714dc">Clock</a>;</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacetket.html">tket</a> {</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="foldopen" id="foldopen00023" data-start="{" data-end="}">
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a7e9fee414fc2ca1cd9da7cac090872a6">   23</a></span><a class="code hl_function" href="classtket_1_1GraphPlacement.html#a7e9fee414fc2ca1cd9da7cac090872a6">GraphPlacement::GraphPlacement</a>(</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtket_1_1Architecture.html">Architecture</a>&amp; _architecture, <span class="keywordtype">unsigned</span> _maximum_matches,</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    <span class="keywordtype">unsigned</span> _timeout, <span class="keywordtype">unsigned</span> _maximum_pattern_gates,</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    <span class="keywordtype">unsigned</span> _maximum_pattern_depth)</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    : maximum_matches_(_maximum_matches),</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>      timeout_(_timeout),</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>      maximum_pattern_gates_(_maximum_pattern_gates),</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>      maximum_pattern_depth_(_maximum_pattern_depth) {</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>  <a class="code hl_variable" href="classtket_1_1Placement.html#a403971b9f46cc27f8ef461bdcda28ac8">architecture_</a> = _architecture;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>  this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#ad62015700235b0826df7e467d3a0c1db">weighted_target_edges</a> = this-&gt;<a class="code hl_function" href="classtket_1_1GraphPlacement.html#a3ef080296c5534c725f51985bb21030c">default_target_weighting</a>(<a class="code hl_variable" href="classtket_1_1Placement.html#a403971b9f46cc27f8ef461bdcda28ac8">architecture_</a>);</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>  this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a> = {</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>      this-&gt;<a class="code hl_function" href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">construct_target_graph</a>(<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#ad62015700235b0826df7e467d3a0c1db">weighted_target_edges</a>, 0)</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>          .<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#a5acf411e3d1a9f34b1b151946e6ee7b3">get_undirected_connectivity</a>()};</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>}</div>
</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="keyword">const</span> std::vector&lt;GraphPlacement::WeightedEdge&gt;</div>
<div class="foldopen" id="foldopen00040" data-start="{" data-end="}">
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a7b77fe1699a9e57b3a56ae3dcd27bc7b">   40</a></span><a class="code hl_function" href="classtket_1_1GraphPlacement.html#a7b77fe1699a9e57b3a56ae3dcd27bc7b">GraphPlacement::default_pattern_weighting</a>(<span class="keyword">const</span> <a class="code hl_class" href="classtket_1_1Circuit.html">Circuit</a>&amp; circuit)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>  <a class="code hl_struct" href="structtket_1_1GraphPlacement_1_1Frontier.html">GraphPlacement::Frontier</a> frontier(circuit);</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>  <span class="keywordtype">unsigned</span> gate_counter = 0;</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>  std::vector&lt;GraphPlacement::WeightedEdge&gt; weights;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>       i &lt; this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#ac7c24555c712b35ee6e4b6fab6e94572">maximum_pattern_depth_</a> &amp;&amp;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>       gate_counter &lt; this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#ab3c086711791c2c390538a94c75ce1f9">maximum_pattern_gates_</a> &amp;&amp; !frontier.<a class="code hl_variable" href="structtket_1_1GraphPlacement_1_1Frontier.html#a8157dc19c01a7d3d8e2d3a1f80212bac">slice</a>-&gt;empty();</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>       i++) {</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_typedef" href="namespacetket.html#a0bf6a146dadc36738e597ab8892a09f5">Vertex</a>&amp; vert : *frontier.<a class="code hl_variable" href="structtket_1_1GraphPlacement_1_1Frontier.html#a8157dc19c01a7d3d8e2d3a1f80212bac">slice</a>) {</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>      <span class="keywordflow">if</span> (circuit.<a class="code hl_function" href="classtket_1_1Circuit.html#aed06b975de918021ca3fb1716498c6d1">get_OpType_from_Vertex</a>(vert) == <a class="code hl_enumvalue" href="namespacetket.html#a13e81344da4794f2648eb9a7b286fcf3a48656da7a6e48c6887d94f4c69c731b6">OpType::Barrier</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>      <a class="code hl_typedef" href="namespacetket.html#a814cee1be1a70fcc4a804f93212b5013">EdgeVec</a> q_out_edges =</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>          circuit.<a class="code hl_function" href="classtket_1_1Circuit.html#af3ed007d540da78e5363389404e25843">get_out_edges_of_type</a>(vert, <a class="code hl_enumvalue" href="namespacetket.html#a4c73a949b027dea7f23b1d5a1bdd526ea033b1e7914d380b381c8b7f9f131328d">EdgeType::Quantum</a>);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>      <span class="keywordtype">unsigned</span> n_q_edges = q_out_edges.size();</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>      <span class="keywordflow">if</span> (n_q_edges == 2) {</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>        <a class="code hl_class" href="classtket_1_1UnitID.html">UnitID</a> uid_0, uid_1;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        <a class="code hl_typedef" href="namespacetket.html#a6a99d9f2b64decd8803090cc890e1e7d">Edge</a> edge_0 = q_out_edges[0];</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <a class="code hl_typedef" href="namespacetket.html#a6a99d9f2b64decd8803090cc890e1e7d">Edge</a> edge_1 = q_out_edges[1];</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        <span class="keywordtype">bool</span> match_0 = <span class="keyword">false</span>, match_1 = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::pair&lt;UnitID, Edge&gt;&amp; pair :</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>             frontier.<a class="code hl_variable" href="structtket_1_1GraphPlacement_1_1Frontier.html#aa7d289d592cefe5ff849fdf318a7e47a">quantum_out_edges</a>-&gt;get&lt;<a class="code hl_struct" href="structtket_1_1TagKey.html">TagKey</a>&gt;()) {</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>          <span class="keywordflow">if</span> (!match_0 &amp;&amp; pair.second == edge_0) {</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>            uid_0 = pair.first;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>          }</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>          <span class="keywordflow">if</span> (!match_1 &amp;&amp; pair.second == edge_1) {</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>            uid_1 = pair.first;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>          }</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>          <span class="keywordflow">if</span> (match_0 &amp;&amp; match_1) {</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>          }</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>        }</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>        <span class="keywordtype">bool</span> match_weight = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        <span class="keywordflow">for</span> (<a class="code hl_struct" href="structtket_1_1GraphPlacement_1_1WeightedEdge.html">WeightedEdge</a>&amp; weighted_edge : weights) {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>          <span class="keywordflow">if</span> ((weighted_edge.node0 == uid_0 &amp;&amp; weighted_edge.node1 == uid_1) ||</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>              (weighted_edge.node0 == uid_1 &amp;&amp; weighted_edge.node1 == uid_0)) {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>            <span class="comment">// actually update the weight here, i.e. this is the &quot;magic&quot;</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>            match_weight = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>            weighted_edge.weight += unsigned(this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#ac7c24555c712b35ee6e4b6fab6e94572">maximum_pattern_depth_</a> - i);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>          }</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        }</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <span class="keywordflow">if</span> (!match_weight) {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>          weights.push_back(</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>              {uid_0, uid_1, unsigned(this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#ac7c24555c712b35ee6e4b6fab6e94572">maximum_pattern_depth_</a> - i), 0});</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        }</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        gate_counter++;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>      }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>      <span class="keywordflow">if</span> (n_q_edges &gt; 2) {</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            <span class="stringliteral">&quot;Can only weight for Circuits with maximum two qubit quantum &quot;</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>            <span class="stringliteral">&quot;gates.&quot;</span>);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>      }</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    }</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    frontier.<a class="code hl_function" href="structtket_1_1GraphPlacement_1_1Frontier.html#adf2553bf6c3a7da9837983c335ee43ce">next_slicefrontier</a>();</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  }</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>  <span class="keywordflow">return</span> weights;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>}</div>
</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="keyword">const</span> std::vector&lt;GraphPlacement::WeightedEdge&gt;</div>
<div class="foldopen" id="foldopen00099" data-start="{" data-end="}">
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a3ef080296c5534c725f51985bb21030c">   99</a></span><a class="code hl_function" href="classtket_1_1GraphPlacement.html#a3ef080296c5534c725f51985bb21030c">GraphPlacement::default_target_weighting</a>(</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <a class="code hl_class" href="classtket_1_1Architecture.html">Architecture</a>&amp; passed_architecture)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>  std::vector&lt;Node&gt; all_nodes = passed_architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1AbstractGraph.html#a4a9ac18002253df494775234111573c2">get_all_nodes_vec</a>();</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>  std::vector&lt;GraphPlacement::WeightedEdge&gt; weights;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>  <span class="keywordtype">unsigned</span> diameter = passed_architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#ad9e850ec5258cc85dfa8258a96946eaa">get_diameter</a>();</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>  <span class="keyword">auto</span> it = all_nodes.begin();</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  <span class="keywordflow">while</span> (it != all_nodes.end()) {</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keyword">auto</span> jt = it;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    ++jt;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="keywordflow">while</span> (jt != all_nodes.end()) {</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>      <span class="keywordtype">unsigned</span> distance = passed_architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#a6153644c140f51d101d243812072003d">get_distance</a>(*it, *jt);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>      weights.push_back(</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>          {*it, *jt, unsigned(diameter + 1 - distance), distance});</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>      ++jt;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    }</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    ++it;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  }</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  <span class="keywordflow">return</span> weights;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>}</div>
</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="foldopen" id="foldopen00119" data-start="{" data-end="}">
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">  119</a></span><a class="code hl_class" href="classtket_1_1QubitGraph.html">QubitGraph</a> <a class="code hl_function" href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">GraphPlacement::construct_pattern_graph</a>(</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keyword">const</span> std::vector&lt;WeightedEdge&gt;&amp; edges, <span class="keywordtype">unsigned</span> max_out_degree)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  <a class="code hl_class" href="classtket_1_1QubitGraph.html">QubitGraph</a> q_graph;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="comment">// Note that edges are in weight order, so this adds higher weight edges first</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_struct" href="structtket_1_1GraphPlacement_1_1WeightedEdge.html">WeightedEdge</a>&amp; weighted_edge : edges) {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <a class="code hl_class" href="classtket_1_1Node.html">Node</a> node0 = <a class="code hl_class" href="classtket_1_1Node.html">Node</a>(weighted_edge.node0);</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <a class="code hl_class" href="classtket_1_1Node.html">Node</a> node1 = <a class="code hl_class" href="classtket_1_1Node.html">Node</a>(weighted_edge.node1);</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordflow">if</span> (!q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">node_exists</a>(node0)) {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>      q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">add_node</a>(node0);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">if</span> (!q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">node_exists</a>(node1)) {</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>      q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">add_node</a>(node1);</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordtype">bool</span> e_01_exists = q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">edge_exists</a>(node0, node1);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordtype">bool</span> e_10_exists = q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">edge_exists</a>(node1, node0);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="keywordflow">if</span> (e_01_exists || e_10_exists) {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>      <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>          <span class="stringliteral">&quot;Graph can only have a single edge between a pair of Node.&quot;</span>);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="keywordflow">if</span> (weighted_edge.weight &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraphBase.html#afd4e9113cd43e281793b7e8405930041">get_out_degree</a>(node0) &lt; max_out_degree &amp;&amp;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraphBase.html#afd4e9113cd43e281793b7e8405930041">get_out_degree</a>(node1) &lt; max_out_degree) {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>      q_graph.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#abc2adbe1c2545b28c4f95848140410f6">add_connection</a>(node0, node1, weighted_edge.weight);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    }</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <span class="keywordflow">return</span> q_graph;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>}</div>
</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="foldopen" id="foldopen00147" data-start="{" data-end="}">
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">  147</a></span><a class="code hl_class" href="classtket_1_1Architecture.html">Architecture</a> <a class="code hl_function" href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">GraphPlacement::construct_target_graph</a>(</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="keyword">const</span> std::vector&lt;WeightedEdge&gt;&amp; edges, <span class="keywordtype">unsigned</span> distance)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <a class="code hl_class" href="classtket_1_1Architecture.html">Architecture</a> architecture;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_struct" href="structtket_1_1GraphPlacement_1_1WeightedEdge.html">WeightedEdge</a>&amp; weighted_edge : edges) {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <a class="code hl_class" href="classtket_1_1Node.html">Node</a> node0 = <a class="code hl_class" href="classtket_1_1Node.html">Node</a>(weighted_edge.node0);</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <a class="code hl_class" href="classtket_1_1Node.html">Node</a> node1 = <a class="code hl_class" href="classtket_1_1Node.html">Node</a>(weighted_edge.node1);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="keywordflow">if</span> (!architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">node_exists</a>(node0)) {</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>      architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">add_node</a>(node0);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    }</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="keywordflow">if</span> (!architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">node_exists</a>(node1)) {</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>      architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">add_node</a>(node1);</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    }</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="keywordtype">bool</span> e_01_exists = architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">edge_exists</a>(node0, node1);</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="keywordtype">bool</span> e_10_exists = architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">edge_exists</a>(node1, node0);</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keywordflow">if</span> (e_01_exists || e_10_exists) {</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>      <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>          <span class="stringliteral">&quot;Graph can only have a single edge between a pair of Node.&quot;</span>);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="keywordflow">if</span> (weighted_edge.weight &gt; 0 &amp;&amp; weighted_edge.distance &lt;= distance + 1) {</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>      architecture.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#abc2adbe1c2545b28c4f95848140410f6">add_connection</a>(node0, node1, weighted_edge.weight);</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    }</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  }</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <span class="keywordflow">return</span> architecture;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>}</div>
</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>std::vector&lt;boost::bimap&lt;Qubit, Node&gt;&gt;</div>
<div class="foldopen" id="foldopen00173" data-start="{" data-end="}">
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a43e81053569514173d9aa6a97ae6115d">  173</a></span><a class="code hl_function" href="classtket_1_1GraphPlacement.html#a43e81053569514173d9aa6a97ae6115d">GraphPlacement::get_all_weighted_subgraph_monomorphisms</a>(</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtket_1_1Circuit.html">Circuit</a>&amp; circ_,</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keyword">const</span> std::vector&lt;GraphPlacement::WeightedEdge&gt;&amp; weighted_pattern_edges,</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="keywordtype">bool</span> return_best)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>  <span class="comment">// we routinely check time, and throw a runtime_error if breached</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  <span class="keyword">const</span> <span class="keyword">auto</span> init_start = Clock::now();</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <span class="keywordflow">if</span> (circ_.<a class="code hl_function" href="classtket_1_1Circuit.html#a0baec82ad9c0308fd2655607d30caf3d">n_qubits</a>() &gt; this-&gt;architecture_.n_nodes()) {</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        <span class="stringliteral">&quot;Circuit has more qubits than Architecture has nodes.&quot;</span>);</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  }</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <span class="keywordtype">unsigned</span> n_qubits = circ_.<a class="code hl_function" href="classtket_1_1Circuit.html#a0baec82ad9c0308fd2655607d30caf3d">n_qubits</a>();</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  <span class="keywordflow">if</span> (n_qubits == 0) {</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="keywordflow">return</span> {{}};</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  }</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  <span class="keywordflow">if</span> (weighted_pattern_edges.empty()) {</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keywordflow">return</span> {{}};</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  }</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <span class="keywordflow">if</span> (std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>          Clock::now() - init_start)</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>          .count() &gt; this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#adda2a7d7a7eeba77a81b4f52619fd44e">timeout_</a>) {</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="keywordflow">throw</span> std::runtime_error(</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <span class="stringliteral">&quot;GraphPlacement execution time has exceeded allowed limits.&quot;</span>);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>  }</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  <span class="comment">// We store pattern graphs as they&#39;re constructed, and check each of them in</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  <span class="comment">// less complex order when a new target graph is constructed</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  std::vector&lt;QubitGraph::UndirectedConnGraph&gt; all_pattern_graphs;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  std::vector&lt;boost::bimap&lt;Qubit, Node&gt;&gt; all_bimaps;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  <span class="keywordtype">unsigned</span> incrementer = 0, last_edges = 0;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  <span class="keywordflow">while</span> (all_bimaps.empty()) {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="comment">// we check timeout not reached regularly</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <span class="keywordflow">if</span> (std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>            Clock::now() - init_start)</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            .count() &gt; this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#adda2a7d7a7eeba77a81b4f52619fd44e">timeout_</a>) {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>      <span class="keywordflow">throw</span> std::runtime_error(</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>          <span class="stringliteral">&quot;GraphPlacement execution time has exceeded allowed limits.&quot;</span>);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    }</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>.size() &lt;= incrementer) {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>      <a class="code hl_variable" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>.push_back(</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>          this-&gt;<a class="code hl_function" href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">construct_target_graph</a>(this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#ad62015700235b0826df7e467d3a0c1db">weighted_target_edges</a>, incrementer)</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>              .get_undirected_connectivity());</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>      TKET_ASSERT(<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>.size() - 1 == incrementer);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    }</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    TKET_ASSERT(<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>.size() &gt; incrementer);</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="comment">// For each increment we construct a smaller pattern graph</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <a class="code hl_typedef" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a6cd3759fc85904c19421f96f380bd29f">QubitGraph::UndirectedConnGraph</a> pattern_graph =</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        this-&gt;<a class="code hl_function" href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">construct_pattern_graph</a>(</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                weighted_pattern_edges, n_qubits - incrementer - 1)</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            .<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#a5acf411e3d1a9f34b1b151946e6ee7b3">get_undirected_connectivity</a>();</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    <span class="comment">// It&#39;s possible that no edges are removed, so only add new graph if it</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    <span class="comment">// has a different number of edges (i.e. is different)</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="keywordtype">unsigned</span> n_edges = boost::num_edges(pattern_graph);</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="keywordflow">if</span> (last_edges != n_edges) {</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>      all_pattern_graphs.push_back(pattern_graph);</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>      last_edges = n_edges;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    }</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <span class="comment">// For each pattern graph constructed, we attempt to find</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="comment">// a subgraph monomorphism for the new target graph</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="comment">// From more full to less full</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <span class="keyword">auto</span> it = all_pattern_graphs.begin();</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <span class="keywordflow">while</span> (it != all_pattern_graphs.end() &amp;&amp; all_bimaps.empty()) {</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>      all_bimaps = <a class="code hl_function" href="namespacetket.html#aa98b9e8e1ce71d9f9db6e81c4d18e4f8">get_weighted_subgraph_monomorphisms</a>(</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>          *it, <a class="code hl_variable" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>[incrementer], this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#ad79aae61b575cd0ee94248d47847eeb4">maximum_matches_</a>,</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>          this-&gt;<a class="code hl_variable" href="classtket_1_1GraphPlacement.html#adda2a7d7a7eeba77a81b4f52619fd44e">timeout_</a> -</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>              std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                  Clock::now() - init_start)</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                  .count(),</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>          return_best);</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>      ++it;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    }</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    incrementer++;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>  }</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>  <span class="keywordflow">return</span> all_bimaps;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>}</div>
</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="foldopen" id="foldopen00287" data-start="{" data-end="}">
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#ae480869ab1b7d7a338a49082b81720ce">  287</a></span>std::map&lt;Qubit, Node&gt; <a class="code hl_function" href="classtket_1_1GraphPlacement.html#ae480869ab1b7d7a338a49082b81720ce">GraphPlacement::convert_bimap</a>(</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    boost::bimap&lt;Qubit, Node&gt;&amp; bimap,</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a6cd3759fc85904c19421f96f380bd29f">QubitGraph::UndirectedConnGraph</a>&amp; pattern_graph)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>  std::map&lt;Qubit, Node&gt; out_map;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>  <span class="comment">// construct a map between pattern graph Qubit and Vertex</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>  std::map&lt;Qubit, unsigned&gt; qubit_vertex_map;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  <span class="keyword">auto</span> vertex_iter_pair = boost::vertices(pattern_graph);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  <span class="keywordflow">while</span> (vertex_iter_pair.first != vertex_iter_pair.second) {</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="keywordtype">unsigned</span> vert = *vertex_iter_pair.first;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    qubit_vertex_map.insert({pattern_graph[vert], vert});</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    ++vertex_iter_pair.first;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>  }</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; entry : bimap.left) {</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keyword">auto</span> qvm_it = qubit_vertex_map.find(entry.first);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    TKET_ASSERT(qvm_it != qubit_vertex_map.end());</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <span class="keywordtype">unsigned</span> entry_vertex = qvm_it-&gt;second;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    <span class="keywordtype">unsigned</span> n_pattern_edges = boost::out_degree(entry_vertex, pattern_graph);</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    std::set&lt;Node&gt; neighbour_nodes =</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        this-&gt;<a class="code hl_variable" href="classtket_1_1Placement.html#a403971b9f46cc27f8ef461bdcda28ac8">architecture_</a>.<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a7547e1ce71c06c1038048a243f68a038">get_neighbour_nodes</a>(entry.second);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <span class="keywordtype">unsigned</span> n_target_edges = neighbour_nodes.size();</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <span class="keywordtype">unsigned</span> n_interacting = 0;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code hl_class" href="classtket_1_1Node.html">Node</a>&amp; node : neighbour_nodes) {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>      <span class="keyword">auto</span> it = bimap.right.find(node);</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>      <span class="comment">// Node may be not be assigned to</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>      <span class="comment">// If it is, check if Qubit are interacting</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>      <span class="comment">// If not, decrement n_interacting</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>      <span class="keywordflow">if</span> (it != bimap.right.end()) {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        <span class="keyword">auto</span> qvm_it = qubit_vertex_map.find(it-&gt;second);</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        TKET_ASSERT(qvm_it != qubit_vertex_map.end());</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        <span class="keyword">auto</span> [_, exists] =</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            boost::edge(entry_vertex, qvm_it-&gt;second, pattern_graph);</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">if</span> (exists) {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>          n_interacting++;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        }</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>      }</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    }</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="keywordflow">if</span> (std::min(n_pattern_edges, n_target_edges) - n_interacting &lt;=</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        n_interacting) {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>      out_map.insert({entry.first, entry.second});</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    }</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  }</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  <span class="keywordflow">return</span> out_map;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>}</div>
</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="foldopen" id="foldopen00336" data-start="{" data-end="}">
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a22991c3d186f54056d4a05a38c0f56b9">  336</a></span>std::vector&lt;std::map&lt;Qubit, Node&gt;&gt; <a class="code hl_function" href="classtket_1_1GraphPlacement.html#a22991c3d186f54056d4a05a38c0f56b9">GraphPlacement::get_all_placement_maps</a>(</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtket_1_1Circuit.html">Circuit</a>&amp; circ_, <span class="keywordtype">unsigned</span> matches)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>  std::vector&lt;WeightedEdge&gt; weighted_pattern_edges =</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>      this-&gt;<a class="code hl_function" href="classtket_1_1GraphPlacement.html#a7b77fe1699a9e57b3a56ae3dcd27bc7b">default_pattern_weighting</a>(circ_);</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>  std::vector&lt;boost::bimap&lt;Qubit, Node&gt;&gt; all_bimaps =</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>      this-&gt;<a class="code hl_function" href="classtket_1_1GraphPlacement.html#a43e81053569514173d9aa6a97ae6115d">get_all_weighted_subgraph_monomorphisms</a>(</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>          circ_, weighted_pattern_edges, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>  std::vector&lt;std::map&lt;Qubit, Node&gt;&gt; all_qmaps;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>  <a class="code hl_typedef" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a6cd3759fc85904c19421f96f380bd29f">QubitGraph::UndirectedConnGraph</a> pattern_graph =</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>      this-&gt;<a class="code hl_function" href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">construct_pattern_graph</a>(weighted_pattern_edges, circ_.<a class="code hl_function" href="classtket_1_1Circuit.html#a0baec82ad9c0308fd2655607d30caf3d">n_qubits</a>())</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>          .<a class="code hl_function" href="classtket_1_1graphs_1_1DirectedGraph.html#a5acf411e3d1a9f34b1b151946e6ee7b3">get_undirected_connectivity</a>();</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; all_bimaps.size() &amp;&amp; i &lt; matches; i++) {</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    all_qmaps.push_back(<a class="code hl_function" href="classtket_1_1GraphPlacement.html#ae480869ab1b7d7a338a49082b81720ce">convert_bimap</a>(all_bimaps[i], pattern_graph));</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>  }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>  <span class="keywordflow">return</span> all_qmaps;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>}</div>
</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>}  <span class="comment">// namespace tket</span></div>
<div class="ttc" id="aGraphPlacement_8cpp_html_acfc0968dc9a49c416d02cc7f519714dc"><div class="ttname"><a href="GraphPlacement_8cpp.html#acfc0968dc9a49c416d02cc7f519714dc">Clock</a></div><div class="ttdeci">std::chrono::steady_clock Clock</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00019">GraphPlacement.cpp:19</a></div></div>
<div class="ttc" id="aPlacement_8hpp_html"><div class="ttname"><a href="Placement_8hpp.html">Placement.hpp</a></div></div>
<div class="ttc" id="aclasstket_1_1Architecture_html"><div class="ttname"><a href="classtket_1_1Architecture.html">tket::Architecture</a></div><div class="ttdef"><b>Definition</b> <a href="Architecture_8hpp_source.html#l00072">Architecture.hpp:72</a></div></div>
<div class="ttc" id="aclasstket_1_1Circuit_html"><div class="ttname"><a href="classtket_1_1Circuit.html">tket::Circuit</a></div><div class="ttdoc">A circuit.</div><div class="ttdef"><b>Definition</b> <a href="Circuit_8hpp_source.html#l00212">Circuit.hpp:212</a></div></div>
<div class="ttc" id="aclasstket_1_1Circuit_html_a0baec82ad9c0308fd2655607d30caf3d"><div class="ttname"><a href="classtket_1_1Circuit.html#a0baec82ad9c0308fd2655607d30caf3d">tket::Circuit::n_qubits</a></div><div class="ttdeci">unsigned n_qubits() const</div><div class="ttdef"><b>Definition</b> <a href="setters__and__getters_8cpp_source.html#l00329">setters_and_getters.cpp:329</a></div></div>
<div class="ttc" id="aclasstket_1_1Circuit_html_aed06b975de918021ca3fb1716498c6d1"><div class="ttname"><a href="classtket_1_1Circuit.html#aed06b975de918021ca3fb1716498c6d1">tket::Circuit::get_OpType_from_Vertex</a></div><div class="ttdeci">OpType get_OpType_from_Vertex(const Vertex &amp;vert) const</div><div class="ttdef"><b>Definition</b> <a href="setters__and__getters_8cpp_source.html#l00675">setters_and_getters.cpp:675</a></div></div>
<div class="ttc" id="aclasstket_1_1Circuit_html_af3ed007d540da78e5363389404e25843"><div class="ttname"><a href="classtket_1_1Circuit.html#af3ed007d540da78e5363389404e25843">tket::Circuit::get_out_edges_of_type</a></div><div class="ttdeci">EdgeVec get_out_edges_of_type(const Vertex &amp;vert, EdgeType et) const</div><div class="ttdoc">All outward edges of given type, ordered by port number.</div><div class="ttdef"><b>Definition</b> <a href="setters__and__getters_8cpp_source.html#l00518">setters_and_getters.cpp:518</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a08840703208f3d1c31c99ce84dfdc052"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">tket::GraphPlacement::extended_target_graphs</a></div><div class="ttdeci">std::vector&lt; Architecture::UndirectedConnGraph &gt; extended_target_graphs</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00195">Placement.hpp:195</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a1e1859232cc7001d6cf1dba6788a8527"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">tket::GraphPlacement::construct_pattern_graph</a></div><div class="ttdeci">QubitGraph construct_pattern_graph(const std::vector&lt; WeightedEdge &gt; &amp;edges, unsigned max_out_degree) const</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00119">GraphPlacement.cpp:119</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a22991c3d186f54056d4a05a38c0f56b9"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a22991c3d186f54056d4a05a38c0f56b9">tket::GraphPlacement::get_all_placement_maps</a></div><div class="ttdeci">std::vector&lt; std::map&lt; Qubit, Node &gt; &gt; get_all_placement_maps(const Circuit &amp;circ_, unsigned matches) const override</div><div class="ttdoc">For some Circuit, returns maps between Circuit UnitID and Architecture UnitID that can be used for re...</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00336">GraphPlacement.cpp:336</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a3ef080296c5534c725f51985bb21030c"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a3ef080296c5534c725f51985bb21030c">tket::GraphPlacement::default_target_weighting</a></div><div class="ttdeci">const std::vector&lt; WeightedEdge &gt; default_target_weighting(Architecture &amp;passed_architecture) const</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00099">GraphPlacement.cpp:99</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a43e81053569514173d9aa6a97ae6115d"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a43e81053569514173d9aa6a97ae6115d">tket::GraphPlacement::get_all_weighted_subgraph_monomorphisms</a></div><div class="ttdeci">std::vector&lt; boost::bimap&lt; Qubit, Node &gt; &gt; get_all_weighted_subgraph_monomorphisms(const Circuit &amp;circ_, const std::vector&lt; WeightedEdge &gt; &amp;weighted_pattern_edges, bool return_best) const</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00173">GraphPlacement.cpp:173</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a7b77fe1699a9e57b3a56ae3dcd27bc7b"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a7b77fe1699a9e57b3a56ae3dcd27bc7b">tket::GraphPlacement::default_pattern_weighting</a></div><div class="ttdeci">const std::vector&lt; WeightedEdge &gt; default_pattern_weighting(const Circuit &amp;circuit) const</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00040">GraphPlacement.cpp:40</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a7e9fee414fc2ca1cd9da7cac090872a6"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a7e9fee414fc2ca1cd9da7cac090872a6">tket::GraphPlacement::GraphPlacement</a></div><div class="ttdeci">GraphPlacement(const Architecture &amp;_architecture, unsigned maximum_matches=2000, unsigned timeout=100, unsigned maximum_pattern_gates=100, unsigned maximum_pattern_depth=100)</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00023">GraphPlacement.cpp:23</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_aa6f61871a2d0a34880a969c132db94c3"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">tket::GraphPlacement::construct_target_graph</a></div><div class="ttdeci">Architecture construct_target_graph(const std::vector&lt; WeightedEdge &gt; &amp;edges, unsigned distance) const</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00147">GraphPlacement.cpp:147</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ab3c086711791c2c390538a94c75ce1f9"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ab3c086711791c2c390538a94c75ce1f9">tket::GraphPlacement::maximum_pattern_gates_</a></div><div class="ttdeci">unsigned maximum_pattern_gates_</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00189">Placement.hpp:189</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ac7c24555c712b35ee6e4b6fab6e94572"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ac7c24555c712b35ee6e4b6fab6e94572">tket::GraphPlacement::maximum_pattern_depth_</a></div><div class="ttdeci">unsigned maximum_pattern_depth_</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00190">Placement.hpp:190</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ad62015700235b0826df7e467d3a0c1db"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ad62015700235b0826df7e467d3a0c1db">tket::GraphPlacement::weighted_target_edges</a></div><div class="ttdeci">std::vector&lt; WeightedEdge &gt; weighted_target_edges</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00192">Placement.hpp:192</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ad79aae61b575cd0ee94248d47847eeb4"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ad79aae61b575cd0ee94248d47847eeb4">tket::GraphPlacement::maximum_matches_</a></div><div class="ttdeci">unsigned maximum_matches_</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00187">Placement.hpp:187</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_adda2a7d7a7eeba77a81b4f52619fd44e"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#adda2a7d7a7eeba77a81b4f52619fd44e">tket::GraphPlacement::timeout_</a></div><div class="ttdeci">unsigned timeout_</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00188">Placement.hpp:188</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ae480869ab1b7d7a338a49082b81720ce"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ae480869ab1b7d7a338a49082b81720ce">tket::GraphPlacement::convert_bimap</a></div><div class="ttdeci">std::map&lt; Qubit, Node &gt; convert_bimap(boost::bimap&lt; Qubit, Node &gt; &amp;bimap, const QubitGraph::UndirectedConnGraph &amp;pattern_graph) const</div><div class="ttdef"><b>Definition</b> <a href="GraphPlacement_8cpp_source.html#l00287">GraphPlacement.cpp:287</a></div></div>
<div class="ttc" id="aclasstket_1_1Node_html"><div class="ttname"><a href="classtket_1_1Node.html">tket::Node</a></div><div class="ttdoc">Architectural qubit location.</div><div class="ttdef"><b>Definition</b> <a href="UnitID_8hpp_source.html#l00267">UnitID.hpp:267</a></div></div>
<div class="ttc" id="aclasstket_1_1Placement_html_a403971b9f46cc27f8ef461bdcda28ac8"><div class="ttname"><a href="classtket_1_1Placement.html#a403971b9f46cc27f8ef461bdcda28ac8">tket::Placement::architecture_</a></div><div class="ttdeci">Architecture architecture_</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00098">Placement.hpp:98</a></div></div>
<div class="ttc" id="aclasstket_1_1QubitGraph_html"><div class="ttname"><a href="classtket_1_1QubitGraph.html">tket::QubitGraph</a></div><div class="ttdoc">Instance of DirectedGraph to hold dependencies between Qubit UnitID objects as given from some Circui...</div><div class="ttdef"><b>Definition</b> <a href="QubitGraph_8hpp_source.html#l00026">QubitGraph.hpp:26</a></div></div>
<div class="ttc" id="aclasstket_1_1UnitID_html"><div class="ttname"><a href="classtket_1_1UnitID.html">tket::UnitID</a></div><div class="ttdoc">Location holding a bit or qubit of information.</div><div class="ttdef"><b>Definition</b> <a href="UnitID_8hpp_source.html#l00068">UnitID.hpp:68</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1AbstractGraph_html_a4a9ac18002253df494775234111573c2"><div class="ttname"><a href="classtket_1_1graphs_1_1AbstractGraph.html#a4a9ac18002253df494775234111573c2">tket::graphs::AbstractGraph::get_all_nodes_vec</a></div><div class="ttdeci">std::vector&lt; T &gt; get_all_nodes_vec() const</div><div class="ttdoc">All nodes as a vector.</div><div class="ttdef"><b>Definition</b> <a href="AbstractGraph_8hpp_source.html#l00070">AbstractGraph.hpp:70</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1AbstractGraph_html_ac76d6e2555455487441603e255b6251c"><div class="ttname"><a href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">tket::graphs::AbstractGraph::node_exists</a></div><div class="ttdeci">bool node_exists(const T &amp;node) const</div><div class="ttdoc">Check if a node exists.</div><div class="ttdef"><b>Definition</b> <a href="AbstractGraph_8hpp_source.html#l00064">AbstractGraph.hpp:64</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraphBase_html_a193968d86fec74d5a4f1b2afdb1b0656"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">tket::graphs::DirectedGraphBase::edge_exists</a></div><div class="ttdeci">bool edge_exists(const T &amp;node1, const T &amp;node2) const override</div><div class="ttdoc">Test whether two nodes are connected.</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00097">DirectedGraph.hpp:97</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraphBase_html_a6cd3759fc85904c19421f96f380bd29f"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraphBase.html#a6cd3759fc85904c19421f96f380bd29f">tket::graphs::DirectedGraphBase::UndirectedConnGraph</a></div><div class="ttdeci">boost::adjacency_list&lt; boost::setS, boost::vecS, boost::undirectedS, T, WeightedEdge &gt; UndirectedConnGraph</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00054">DirectedGraph.hpp:55</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraphBase_html_a7547e1ce71c06c1038048a243f68a038"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraphBase.html#a7547e1ce71c06c1038048a243f68a038">tket::graphs::DirectedGraphBase::get_neighbour_nodes</a></div><div class="ttdeci">std::set&lt; T &gt; get_neighbour_nodes(const T &amp;node) const</div><div class="ttdoc">Get all neighbours of a node.</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00309">DirectedGraph.hpp:309</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraphBase_html_afd4e9113cd43e281793b7e8405930041"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraphBase.html#afd4e9113cd43e281793b7e8405930041">tket::graphs::DirectedGraphBase::get_out_degree</a></div><div class="ttdeci">unsigned get_out_degree(const T &amp;node) const</div><div class="ttdoc">Get the out-degree of a node.</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00190">DirectedGraph.hpp:190</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_a5acf411e3d1a9f34b1b151946e6ee7b3"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#a5acf411e3d1a9f34b1b151946e6ee7b3">tket::graphs::DirectedGraph::get_undirected_connectivity</a></div><div class="ttdeci">const UndirectedConnGraph &amp; get_undirected_connectivity() const &amp;</div><div class="ttdoc">Return an unweighted undirected graph with the same connectivity.</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00473">DirectedGraph.hpp:473</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_a6153644c140f51d101d243812072003d"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#a6153644c140f51d101d243812072003d">tket::graphs::DirectedGraph::get_distance</a></div><div class="ttdeci">unsigned get_distance(const T &amp;node1, const T &amp;node2) const override</div><div class="ttdoc">Graph distance between two nodes.</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00423">DirectedGraph.hpp:423</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_a9e7872be30722a2d779e30be4877d34f"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">tket::graphs::DirectedGraph::add_node</a></div><div class="ttdeci">void add_node(const T &amp;node)</div><div class="ttdoc">Add a node to the graph.</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00498">DirectedGraph.hpp:498</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_abc2adbe1c2545b28c4f95848140410f6"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#abc2adbe1c2545b28c4f95848140410f6">tket::graphs::DirectedGraph::add_connection</a></div><div class="ttdeci">void add_connection(const T &amp;node1, const T &amp;node2, unsigned weight=1)</div><div class="ttdoc">Add a (weighted) edge between two nodes.</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00510">DirectedGraph.hpp:510</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_ad9e850ec5258cc85dfa8258a96946eaa"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#ad9e850ec5258cc85dfa8258a96946eaa">tket::graphs::DirectedGraph::get_diameter</a></div><div class="ttdeci">unsigned get_diameter() override</div><div class="ttdoc">Diameter of graph.</div><div class="ttdef"><b>Definition</b> <a href="DirectedGraph_8hpp_source.html#l00442">DirectedGraph.hpp:442</a></div></div>
<div class="ttc" id="anamespacetket_html"><div class="ttname"><a href="namespacetket.html">tket</a></div><div class="ttdoc">Defines tket::DeviceCharacterisation, used in NoiseAwarePlacement and in commute_SQ_gates_through_SWA...</div><div class="ttdef"><b>Definition</b> <a href="Path_8cpp_source.html#l00022">Path.cpp:22</a></div></div>
<div class="ttc" id="anamespacetket_html_a0bf6a146dadc36738e597ab8892a09f5"><div class="ttname"><a href="namespacetket.html#a0bf6a146dadc36738e597ab8892a09f5">tket::Vertex</a></div><div class="ttdeci">boost::graph_traits&lt; DAG &gt;::vertex_descriptor Vertex</div><div class="ttdef"><b>Definition</b> <a href="DAGDefs_8hpp_source.html#l00070">DAGDefs.hpp:70</a></div></div>
<div class="ttc" id="anamespacetket_html_a13e81344da4794f2648eb9a7b286fcf3a48656da7a6e48c6887d94f4c69c731b6"><div class="ttname"><a href="namespacetket.html#a13e81344da4794f2648eb9a7b286fcf3a48656da7a6e48c6887d94f4c69c731b6">tket::OpType::Barrier</a></div><div class="ttdeci">@ Barrier</div><div class="ttdoc">No-op that must be preserved by compilation.</div></div>
<div class="ttc" id="anamespacetket_html_a4c73a949b027dea7f23b1d5a1bdd526ea033b1e7914d380b381c8b7f9f131328d"><div class="ttname"><a href="namespacetket.html#a4c73a949b027dea7f23b1d5a1bdd526ea033b1e7914d380b381c8b7f9f131328d">tket::EdgeType::Quantum</a></div><div class="ttdeci">@ Quantum</div><div class="ttdoc">A wire carrying quantum information, corresponding to some allocated Qubit.</div></div>
<div class="ttc" id="anamespacetket_html_a6a99d9f2b64decd8803090cc890e1e7d"><div class="ttname"><a href="namespacetket.html#a6a99d9f2b64decd8803090cc890e1e7d">tket::Edge</a></div><div class="ttdeci">boost::graph_traits&lt; DAG &gt;::edge_descriptor Edge</div><div class="ttdef"><b>Definition</b> <a href="DAGDefs_8hpp_source.html#l00088">DAGDefs.hpp:88</a></div></div>
<div class="ttc" id="anamespacetket_html_a814cee1be1a70fcc4a804f93212b5013"><div class="ttname"><a href="namespacetket.html#a814cee1be1a70fcc4a804f93212b5013">tket::EdgeVec</a></div><div class="ttdeci">std::vector&lt; Edge &gt; EdgeVec</div><div class="ttdef"><b>Definition</b> <a href="DAGDefs_8hpp_source.html#l00093">DAGDefs.hpp:93</a></div></div>
<div class="ttc" id="anamespacetket_html_aa98b9e8e1ce71d9f9db6e81c4d18e4f8"><div class="ttname"><a href="namespacetket.html#aa98b9e8e1ce71d9f9db6e81c4d18e4f8">tket::get_weighted_subgraph_monomorphisms</a></div><div class="ttdeci">std::vector&lt; boost::bimap&lt; Qubit, Node &gt; &gt; get_weighted_subgraph_monomorphisms(QubitGraph::UndirectedConnGraph &amp;pattern_graph, Architecture::UndirectedConnGraph &amp;target_graph, unsigned max_matches, unsigned timeout_ms, bool return_best)</div><div class="ttdoc">Solves the pure unweighted subgraph monomorphism problem, trying to embed the pattern graph into the ...</div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1Frontier_html"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1Frontier.html">tket::GraphPlacement::Frontier</a></div><div class="ttdoc">Holds information for slice wise iteration of Circuit.</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00123">Placement.hpp:123</a></div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1Frontier_html_a8157dc19c01a7d3d8e2d3a1f80212bac"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1Frontier.html#a8157dc19c01a7d3d8e2d3a1f80212bac">tket::GraphPlacement::Frontier::slice</a></div><div class="ttdeci">std::shared_ptr&lt; Slice &gt; slice</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00125">Placement.hpp:125</a></div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1Frontier_html_aa7d289d592cefe5ff849fdf318a7e47a"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1Frontier.html#aa7d289d592cefe5ff849fdf318a7e47a">tket::GraphPlacement::Frontier::quantum_out_edges</a></div><div class="ttdeci">std::shared_ptr&lt; unit_frontier_t &gt; quantum_out_edges</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00129">Placement.hpp:129</a></div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1Frontier_html_adf2553bf6c3a7da9837983c335ee43ce"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1Frontier.html#adf2553bf6c3a7da9837983c335ee43ce">tket::GraphPlacement::Frontier::next_slicefrontier</a></div><div class="ttdeci">void next_slicefrontier()</div><div class="ttdef"><b>Definition</b> <a href="Frontier_8cpp_source.html#l00041">Frontier.cpp:41</a></div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1WeightedEdge_html"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1WeightedEdge.html">tket::GraphPlacement::WeightedEdge</a></div><div class="ttdoc">Holds information for constructing a weighted edge in a QubitGraph.</div><div class="ttdef"><b>Definition</b> <a href="Placement_8hpp_source.html#l00112">Placement.hpp:112</a></div></div>
<div class="ttc" id="astructtket_1_1TagKey_html"><div class="ttname"><a href="structtket_1_1TagKey.html">tket::TagKey</a></div><div class="ttdef"><b>Definition</b> <a href="SequencedContainers_8hpp_source.html#l00025">SequencedContainers.hpp:25</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
