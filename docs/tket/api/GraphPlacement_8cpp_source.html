<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tket: src/Placement/GraphPlacement.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tket
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_56a38258b01f57376a0eb0ddf1115d22.html">Placement</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GraphPlacement.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="GraphPlacement_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2019-2023 Cambridge Quantum Computing</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Placement_8hpp.html">Placement/Placement.hpp</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HelperFunctions_8hpp.html">Utils/HelperFunctions.hpp</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="GraphPlacement_8cpp.html#acfc0968dc9a49c416d02cc7f519714dc">   20</a></span>&#160;<span class="keyword">typedef</span> std::chrono::steady_clock <a class="code" href="GraphPlacement_8cpp.html#acfc0968dc9a49c416d02cc7f519714dc">Clock</a>;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacetket.html">tket</a> {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a7e9fee414fc2ca1cd9da7cac090872a6">   24</a></span>&#160;<a class="code" href="classtket_1_1GraphPlacement.html#a7e9fee414fc2ca1cd9da7cac090872a6">GraphPlacement::GraphPlacement</a>(</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtket_1_1Architecture.html">Architecture</a>&amp; _architecture, <span class="keywordtype">unsigned</span> _maximum_matches,</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keywordtype">unsigned</span> _timeout, <span class="keywordtype">unsigned</span> _maximum_pattern_gates,</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordtype">unsigned</span> _maximum_pattern_depth)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    : maximum_matches_(_maximum_matches),</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;      timeout_(_timeout),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      maximum_pattern_gates_(_maximum_pattern_gates),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;      maximum_pattern_depth_(_maximum_pattern_depth) {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classtket_1_1Placement.html#a403971b9f46cc27f8ef461bdcda28ac8">architecture_</a> = _architecture;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#ad62015700235b0826df7e467d3a0c1db">weighted_target_edges</a> = this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#a3ef080296c5534c725f51985bb21030c">default_target_weighting</a>(<a class="code" href="classtket_1_1Placement.html#a403971b9f46cc27f8ef461bdcda28ac8">architecture_</a>);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a> = {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">construct_target_graph</a>(<a class="code" href="classtket_1_1GraphPlacement.html#ad62015700235b0826df7e467d3a0c1db">weighted_target_edges</a>, 0)</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;          .<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#a8d3d82f0ae953281ebf989922671499d">get_undirected_connectivity</a>()};</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">const</span> std::vector&lt;GraphPlacement::WeightedEdge&gt;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a7b77fe1699a9e57b3a56ae3dcd27bc7b">   41</a></span>&#160;<a class="code" href="classtket_1_1GraphPlacement.html#a7b77fe1699a9e57b3a56ae3dcd27bc7b">GraphPlacement::default_pattern_weighting</a>(<span class="keyword">const</span> <a class="code" href="classtket_1_1Circuit.html">Circuit</a>&amp; circuit)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="structtket_1_1GraphPlacement_1_1Frontier.html">GraphPlacement::Frontier</a> frontier(circuit);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordtype">unsigned</span> gate_counter = 0;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  std::vector&lt;GraphPlacement::WeightedEdge&gt; weights;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;       i &lt; this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#ac7c24555c712b35ee6e4b6fab6e94572">maximum_pattern_depth_</a> &amp;&amp;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;       gate_counter &lt; this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#ab3c086711791c2c390538a94c75ce1f9">maximum_pattern_gates_</a> &amp;&amp; !frontier.<a class="code" href="structtket_1_1GraphPlacement_1_1Frontier.html#a8157dc19c01a7d3d8e2d3a1f80212bac">slice</a>-&gt;empty();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;       i++) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="namespacetket.html#a0bf6a146dadc36738e597ab8892a09f5">Vertex</a>&amp; vert : *frontier.<a class="code" href="structtket_1_1GraphPlacement_1_1Frontier.html#a8157dc19c01a7d3d8e2d3a1f80212bac">slice</a>) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <span class="keywordflow">if</span> (circuit.<a class="code" href="classtket_1_1Circuit.html#aed06b975de918021ca3fb1716498c6d1">get_OpType_from_Vertex</a>(vert) == <a class="code" href="namespacetket.html#a13e81344da4794f2648eb9a7b286fcf3a48656da7a6e48c6887d94f4c69c731b6">OpType::Barrier</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <a class="code" href="namespacetket.html#a814cee1be1a70fcc4a804f93212b5013">EdgeVec</a> q_out_edges =</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;          circuit.<a class="code" href="classtket_1_1Circuit.html#af3ed007d540da78e5363389404e25843">get_out_edges_of_type</a>(vert, <a class="code" href="namespacetket.html#a4c73a949b027dea7f23b1d5a1bdd526ea033b1e7914d380b381c8b7f9f131328d">EdgeType::Quantum</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <span class="keywordtype">unsigned</span> n_q_edges = q_out_edges.size();</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <span class="keywordflow">if</span> (n_q_edges == 2) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <a class="code" href="classtket_1_1UnitID.html">UnitID</a> uid_0, uid_1;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="namespacetket.html#a6a99d9f2b64decd8803090cc890e1e7d">Edge</a> edge_0 = q_out_edges[0];</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="namespacetket.html#a6a99d9f2b64decd8803090cc890e1e7d">Edge</a> edge_1 = q_out_edges[1];</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordtype">bool</span> match_0 = <span class="keyword">false</span>, match_1 = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::pair&lt;UnitID, Edge&gt;&amp; pair :</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;             frontier.<a class="code" href="structtket_1_1GraphPlacement_1_1Frontier.html#aa7d289d592cefe5ff849fdf318a7e47a">quantum_out_edges</a>-&gt;get&lt;<a class="code" href="structtket_1_1TagKey.html">TagKey</a>&gt;()) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;          <span class="keywordflow">if</span> (!match_0 &amp;&amp; pair.second == edge_0) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            uid_0 = pair.first;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;          }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;          <span class="keywordflow">if</span> (!match_1 &amp;&amp; pair.second == edge_1) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            uid_1 = pair.first;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;          }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;          <span class="keywordflow">if</span> (match_0 &amp;&amp; match_1) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;          }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordtype">bool</span> match_weight = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="structtket_1_1GraphPlacement_1_1WeightedEdge.html">WeightedEdge</a>&amp; weighted_edge : weights) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;          <span class="keywordflow">if</span> ((weighted_edge.node0 == uid_0 &amp;&amp; weighted_edge.node1 == uid_1) ||</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;              (weighted_edge.node0 == uid_1 &amp;&amp; weighted_edge.node1 == uid_0)) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <span class="comment">// actually update the weight here, i.e. this is the &quot;magic&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            match_weight = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            weighted_edge.weight += unsigned(this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#ac7c24555c712b35ee6e4b6fab6e94572">maximum_pattern_depth_</a> - i);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;          }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span> (!match_weight) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;          weights.push_back(</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;              {uid_0, uid_1, unsigned(this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#ac7c24555c712b35ee6e4b6fab6e94572">maximum_pattern_depth_</a> - i), 0});</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        gate_counter++;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">if</span> (n_q_edges &gt; 2) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="stringliteral">&quot;Can only weight for Circuits with maximum two qubit quantum &quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="stringliteral">&quot;gates.&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    frontier.<a class="code" href="structtket_1_1GraphPlacement_1_1Frontier.html#adf2553bf6c3a7da9837983c335ee43ce">next_slicefrontier</a>();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> weights;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">const</span> std::vector&lt;GraphPlacement::WeightedEdge&gt;</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a3ef080296c5534c725f51985bb21030c">  100</a></span>&#160;<a class="code" href="classtket_1_1GraphPlacement.html#a3ef080296c5534c725f51985bb21030c">GraphPlacement::default_target_weighting</a>(</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="classtket_1_1Architecture.html">Architecture</a>&amp; passed_architecture)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  std::vector&lt;Node&gt; all_nodes = passed_architecture.<a class="code" href="classtket_1_1graphs_1_1AbstractGraph.html#a20fd7f5841f214f8e7ac4bfe09a40c24">get_all_nodes_vec</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  std::vector&lt;GraphPlacement::WeightedEdge&gt; weights;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">unsigned</span> diameter = passed_architecture.<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#ad9e850ec5258cc85dfa8258a96946eaa">get_diameter</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keyword">auto</span> it = all_nodes.begin();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">while</span> (it != all_nodes.end()) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">auto</span> jt = it;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    ++jt;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">while</span> (jt != all_nodes.end()) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordtype">unsigned</span> distance = passed_architecture.<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#a6153644c140f51d101d243812072003d">get_distance</a>(*it, *jt);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      weights.push_back(</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;          {*it, *jt, unsigned(diameter + 1 - distance), distance});</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      ++jt;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    ++it;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">return</span> weights;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">  120</a></span>&#160;<a class="code" href="classtket_1_1QubitGraph.html">QubitGraph</a> <a class="code" href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">GraphPlacement::construct_pattern_graph</a>(</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">const</span> std::vector&lt;WeightedEdge&gt;&amp; edges, <span class="keywordtype">unsigned</span> max_out_degree)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="classtket_1_1QubitGraph.html">QubitGraph</a> q_graph;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// Note that edges are in weight order, so this adds higher weight edges first</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structtket_1_1GraphPlacement_1_1WeightedEdge.html">WeightedEdge</a>&amp; weighted_edge : edges) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="classtket_1_1Node.html">Node</a> node0 = <a class="code" href="classtket_1_1Node.html">Node</a>(weighted_edge.node0);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classtket_1_1Node.html">Node</a> node1 = <a class="code" href="classtket_1_1Node.html">Node</a>(weighted_edge.node1);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (!q_graph.<a class="code" href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">node_exists</a>(node0)) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      q_graph.<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">add_node</a>(node0);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (!q_graph.<a class="code" href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">node_exists</a>(node1)) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      q_graph.<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">add_node</a>(node1);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">bool</span> e_01_exists = q_graph.<a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">edge_exists</a>(node0, node1);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordtype">bool</span> e_10_exists = q_graph.<a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">edge_exists</a>(node1, node0);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (e_01_exists || e_10_exists) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          <span class="stringliteral">&quot;Graph can only have a single edge between a pair of Node.&quot;</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (weighted_edge.weight &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        q_graph.<a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#afd4e9113cd43e281793b7e8405930041">get_out_degree</a>(node0) &lt; max_out_degree &amp;&amp;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        q_graph.<a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#afd4e9113cd43e281793b7e8405930041">get_out_degree</a>(node1) &lt; max_out_degree) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      q_graph.<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#abc2adbe1c2545b28c4f95848140410f6">add_connection</a>(node0, node1, weighted_edge.weight);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">return</span> q_graph;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">  148</a></span>&#160;<a class="code" href="classtket_1_1Architecture.html">Architecture</a> <a class="code" href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">GraphPlacement::construct_target_graph</a>(</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">const</span> std::vector&lt;WeightedEdge&gt;&amp; edges, <span class="keywordtype">unsigned</span> distance)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="classtket_1_1Architecture.html">Architecture</a> architecture;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structtket_1_1GraphPlacement_1_1WeightedEdge.html">WeightedEdge</a>&amp; weighted_edge : edges) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="classtket_1_1Node.html">Node</a> node0 = <a class="code" href="classtket_1_1Node.html">Node</a>(weighted_edge.node0);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="classtket_1_1Node.html">Node</a> node1 = <a class="code" href="classtket_1_1Node.html">Node</a>(weighted_edge.node1);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> (!architecture.<a class="code" href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">node_exists</a>(node0)) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      architecture.<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">add_node</a>(node0);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (!architecture.<a class="code" href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">node_exists</a>(node1)) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      architecture.<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">add_node</a>(node1);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">bool</span> e_01_exists = architecture.<a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">edge_exists</a>(node0, node1);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">bool</span> e_10_exists = architecture.<a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">edge_exists</a>(node1, node0);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (e_01_exists || e_10_exists) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;          <span class="stringliteral">&quot;Graph can only have a single edge between a pair of Node.&quot;</span>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (weighted_edge.weight &gt; 0 &amp;&amp; weighted_edge.distance &lt;= distance + 1) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      architecture.<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#abc2adbe1c2545b28c4f95848140410f6">add_connection</a>(node0, node1, weighted_edge.weight);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">return</span> architecture;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;std::vector&lt;boost::bimap&lt;Qubit, Node&gt;&gt;</div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a43e81053569514173d9aa6a97ae6115d">  174</a></span>&#160;<a class="code" href="classtket_1_1GraphPlacement.html#a43e81053569514173d9aa6a97ae6115d">GraphPlacement::get_all_weighted_subgraph_monomorphisms</a>(</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtket_1_1Circuit.html">Circuit</a>&amp; circ_,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keyword">const</span> std::vector&lt;GraphPlacement::WeightedEdge&gt;&amp; weighted_pattern_edges,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">bool</span> return_best)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// we routinely check time, and throw a runtime_error if breached</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> init_start = Clock::now();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (circ_.<a class="code" href="classtket_1_1Circuit.html#a0baec82ad9c0308fd2655607d30caf3d">n_qubits</a>() &gt; this-&gt;architecture_.n_nodes()) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="stringliteral">&quot;Circuit has more qubits than Architecture has nodes.&quot;</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordtype">unsigned</span> n_qubits = circ_.<a class="code" href="classtket_1_1Circuit.html#a0baec82ad9c0308fd2655607d30caf3d">n_qubits</a>();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span> (n_qubits == 0) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> {{}};</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">if</span> (weighted_pattern_edges.empty()) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> {{}};</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">if</span> (std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          Clock::now() - init_start)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          .count() &gt; this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#adda2a7d7a7eeba77a81b4f52619fd44e">timeout_</a>) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="stringliteral">&quot;GraphPlacement execution time has exceeded allowed limits.&quot;</span>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// We store pattern graphs as they&#39;re constructed, and check each of them in</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// less complex order when a new target graph is constructed</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  std::vector&lt;QubitGraph::UndirectedConnGraph&gt; all_pattern_graphs;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  std::vector&lt;boost::bimap&lt;Qubit, Node&gt;&gt; all_bimaps;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordtype">unsigned</span> incrementer = 0, last_edges = 0;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">while</span> (all_bimaps.empty()) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// we check timeout not reached regularly</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            Clock::now() - init_start)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            .count() &gt; this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#adda2a7d7a7eeba77a81b4f52619fd44e">timeout_</a>) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          <span class="stringliteral">&quot;GraphPlacement execution time has exceeded allowed limits.&quot;</span>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>.size() &lt;= incrementer) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>.push_back(</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">construct_target_graph</a>(this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#ad62015700235b0826df7e467d3a0c1db">weighted_target_edges</a>, incrementer)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;              .get_undirected_connectivity());</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      TKET_ASSERT(<a class="code" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>.size() - 1 == incrementer);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    TKET_ASSERT(<a class="code" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>.size() &gt; incrementer);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// For each increment we construct a smaller pattern graph</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a6cd3759fc85904c19421f96f380bd29f">QubitGraph::UndirectedConnGraph</a> pattern_graph =</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">construct_pattern_graph</a>(</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                weighted_pattern_edges, n_qubits - incrementer - 1)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            .<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#a8d3d82f0ae953281ebf989922671499d">get_undirected_connectivity</a>();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// It&#39;s possible that no edges are removed, so only add new graph if it</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// has a different number of edges (i.e. is different)</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">unsigned</span> n_edges = boost::num_edges(pattern_graph);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (last_edges != n_edges) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      all_pattern_graphs.push_back(pattern_graph);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      last_edges = n_edges;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// For each pattern graph constructed, we attempt to find</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// a subgraph monomorphism for the new target graph</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// From more full to less full</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keyword">auto</span> it = all_pattern_graphs.begin();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">while</span> (it != all_pattern_graphs.end() &amp;&amp; all_bimaps.empty()) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      all_bimaps = <a class="code" href="namespacetket.html#afc84ec8492376a2e6899ad546c0068cc">get_weighted_subgraph_monomorphisms</a>(</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          *it, <a class="code" href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">extended_target_graphs</a>[incrementer], this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#ad79aae61b575cd0ee94248d47847eeb4">maximum_matches_</a>,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;          this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#adda2a7d7a7eeba77a81b4f52619fd44e">timeout_</a> -</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;              std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                  Clock::now() - init_start)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                  .count(),</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;          return_best);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      ++it;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    incrementer++;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">return</span> all_bimaps;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#ae480869ab1b7d7a338a49082b81720ce">  288</a></span>&#160;std::map&lt;Qubit, Node&gt; <a class="code" href="classtket_1_1GraphPlacement.html#ae480869ab1b7d7a338a49082b81720ce">GraphPlacement::convert_bimap</a>(</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    boost::bimap&lt;Qubit, Node&gt;&amp; bimap,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a6cd3759fc85904c19421f96f380bd29f">QubitGraph::UndirectedConnGraph</a>&amp; pattern_graph)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  std::map&lt;Qubit, Node&gt; out_map;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// construct a map between pattern graph Qubit and Vertex</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  std::map&lt;Qubit, unsigned&gt; qubit_vertex_map;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keyword">auto</span> vertex_iter_pair = boost::vertices(pattern_graph);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">while</span> (vertex_iter_pair.first != vertex_iter_pair.second) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">unsigned</span> vert = *vertex_iter_pair.first;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    qubit_vertex_map.insert({pattern_graph[vert], vert});</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    ++vertex_iter_pair.first;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; entry : bimap.left) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keyword">auto</span> qvm_it = qubit_vertex_map.find(entry.first);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    TKET_ASSERT(qvm_it != qubit_vertex_map.end());</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">unsigned</span> entry_vertex = qvm_it-&gt;second;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordtype">unsigned</span> n_pattern_edges = boost::out_degree(entry_vertex, pattern_graph);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    std::set&lt;Node&gt; neighbour_nodes =</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        this-&gt;<a class="code" href="classtket_1_1Placement.html#a403971b9f46cc27f8ef461bdcda28ac8">architecture_</a>.<a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#ac76a46f446777f3195ff2834303839d1">get_neighbour_nodes</a>(entry.second);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">unsigned</span> n_target_edges = neighbour_nodes.size();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">unsigned</span> n_interacting = 0;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classtket_1_1Node.html">Node</a>&amp; node : neighbour_nodes) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keyword">auto</span> it = bimap.right.find(node);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="comment">// Node may be not be assigned to</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment">// If it is, check if Qubit are interacting</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">// If not, decrement n_interacting</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">if</span> (it != bimap.right.end()) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keyword">auto</span> qvm_it = qubit_vertex_map.find(it-&gt;second);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        TKET_ASSERT(qvm_it != qubit_vertex_map.end());</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keyword">auto</span> [_, exists] =</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <a class="code" href="namespacetket_1_1graphs_1_1utils.html#a0ddb76f99e73585abb2f33d56bd69710">boost::edge</a>(entry_vertex, qvm_it-&gt;second, pattern_graph);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">if</span> (exists) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          n_interacting++;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (std::min(n_pattern_edges, n_target_edges) - n_interacting &lt;=</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        n_interacting) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      out_map.insert({entry.first, entry.second});</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">return</span> out_map;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="classtket_1_1GraphPlacement.html#a22991c3d186f54056d4a05a38c0f56b9">  337</a></span>&#160;std::vector&lt;std::map&lt;Qubit, Node&gt;&gt; <a class="code" href="classtket_1_1GraphPlacement.html#a22991c3d186f54056d4a05a38c0f56b9">GraphPlacement::get_all_placement_maps</a>(</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtket_1_1Circuit.html">Circuit</a>&amp; circ_, <span class="keywordtype">unsigned</span> matches)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  std::vector&lt;WeightedEdge&gt; weighted_pattern_edges =</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#a7b77fe1699a9e57b3a56ae3dcd27bc7b">default_pattern_weighting</a>(circ_);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  std::vector&lt;boost::bimap&lt;Qubit, Node&gt;&gt; all_bimaps =</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#a43e81053569514173d9aa6a97ae6115d">get_all_weighted_subgraph_monomorphisms</a>(</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          circ_, weighted_pattern_edges, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  std::vector&lt;std::map&lt;Qubit, Node&gt;&gt; all_qmaps;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classtket_1_1graphs_1_1DirectedGraphBase.html#a6cd3759fc85904c19421f96f380bd29f">QubitGraph::UndirectedConnGraph</a> pattern_graph =</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      this-&gt;<a class="code" href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">construct_pattern_graph</a>(weighted_pattern_edges, circ_.<a class="code" href="classtket_1_1Circuit.html#a0baec82ad9c0308fd2655607d30caf3d">n_qubits</a>())</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          .<a class="code" href="classtket_1_1graphs_1_1DirectedGraph.html#a8d3d82f0ae953281ebf989922671499d">get_undirected_connectivity</a>();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; all_bimaps.size() &amp;&amp; i &lt; matches; i++) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    all_qmaps.push_back(<a class="code" href="classtket_1_1GraphPlacement.html#ae480869ab1b7d7a338a49082b81720ce">convert_bimap</a>(all_bimaps[i], pattern_graph));</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">return</span> all_qmaps;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}  <span class="comment">// namespace tket</span></div>
<div class="ttc" id="aGraphPlacement_8cpp_html_acfc0968dc9a49c416d02cc7f519714dc"><div class="ttname"><a href="GraphPlacement_8cpp.html#acfc0968dc9a49c416d02cc7f519714dc">Clock</a></div><div class="ttdeci">std::chrono::steady_clock Clock</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00020">GraphPlacement.cpp:20</a></div></div>
<div class="ttc" id="aHelperFunctions_8hpp_html"><div class="ttname"><a href="HelperFunctions_8hpp.html">HelperFunctions.hpp</a></div></div>
<div class="ttc" id="aPlacement_8hpp_html"><div class="ttname"><a href="Placement_8hpp.html">Placement.hpp</a></div></div>
<div class="ttc" id="aclasstket_1_1Architecture_html"><div class="ttname"><a href="classtket_1_1Architecture.html">tket::Architecture</a></div><div class="ttdef"><b>Definition:</b> <a href="Architecture_8hpp_source.html#l00076">Architecture.hpp:76</a></div></div>
<div class="ttc" id="aclasstket_1_1Circuit_html"><div class="ttname"><a href="classtket_1_1Circuit.html">tket::Circuit</a></div><div class="ttdoc">A circuit.</div><div class="ttdef"><b>Definition:</b> <a href="Circuit_8hpp_source.html#l00248">Circuit.hpp:248</a></div></div>
<div class="ttc" id="aclasstket_1_1Circuit_html_a0baec82ad9c0308fd2655607d30caf3d"><div class="ttname"><a href="classtket_1_1Circuit.html#a0baec82ad9c0308fd2655607d30caf3d">tket::Circuit::n_qubits</a></div><div class="ttdeci">unsigned n_qubits() const</div><div class="ttdef"><b>Definition:</b> <a href="setters__and__getters_8cpp_source.html#l00283">setters_and_getters.cpp:283</a></div></div>
<div class="ttc" id="aclasstket_1_1Circuit_html_aed06b975de918021ca3fb1716498c6d1"><div class="ttname"><a href="classtket_1_1Circuit.html#aed06b975de918021ca3fb1716498c6d1">tket::Circuit::get_OpType_from_Vertex</a></div><div class="ttdeci">OpType get_OpType_from_Vertex(const Vertex &amp;vert) const</div><div class="ttdef"><b>Definition:</b> <a href="setters__and__getters_8cpp_source.html#l00629">setters_and_getters.cpp:629</a></div></div>
<div class="ttc" id="aclasstket_1_1Circuit_html_af3ed007d540da78e5363389404e25843"><div class="ttname"><a href="classtket_1_1Circuit.html#af3ed007d540da78e5363389404e25843">tket::Circuit::get_out_edges_of_type</a></div><div class="ttdeci">EdgeVec get_out_edges_of_type(const Vertex &amp;vert, EdgeType et) const</div><div class="ttdoc">All outward edges of given type, ordered by port number.</div><div class="ttdef"><b>Definition:</b> <a href="setters__and__getters_8cpp_source.html#l00472">setters_and_getters.cpp:472</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a08840703208f3d1c31c99ce84dfdc052"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a08840703208f3d1c31c99ce84dfdc052">tket::GraphPlacement::extended_target_graphs</a></div><div class="ttdeci">std::vector&lt; Architecture::UndirectedConnGraph &gt; extended_target_graphs</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00195">Placement.hpp:195</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a1e1859232cc7001d6cf1dba6788a8527"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a1e1859232cc7001d6cf1dba6788a8527">tket::GraphPlacement::construct_pattern_graph</a></div><div class="ttdeci">QubitGraph construct_pattern_graph(const std::vector&lt; WeightedEdge &gt; &amp;edges, unsigned max_out_degree) const</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00120">GraphPlacement.cpp:120</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a22991c3d186f54056d4a05a38c0f56b9"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a22991c3d186f54056d4a05a38c0f56b9">tket::GraphPlacement::get_all_placement_maps</a></div><div class="ttdeci">std::vector&lt; std::map&lt; Qubit, Node &gt; &gt; get_all_placement_maps(const Circuit &amp;circ_, unsigned matches) const override</div><div class="ttdoc">For some Circuit, returns maps between Circuit UnitID and Architecture UnitID that can be used for re...</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00337">GraphPlacement.cpp:337</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a3ef080296c5534c725f51985bb21030c"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a3ef080296c5534c725f51985bb21030c">tket::GraphPlacement::default_target_weighting</a></div><div class="ttdeci">const std::vector&lt; WeightedEdge &gt; default_target_weighting(Architecture &amp;passed_architecture) const</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00100">GraphPlacement.cpp:100</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a43e81053569514173d9aa6a97ae6115d"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a43e81053569514173d9aa6a97ae6115d">tket::GraphPlacement::get_all_weighted_subgraph_monomorphisms</a></div><div class="ttdeci">std::vector&lt; boost::bimap&lt; Qubit, Node &gt; &gt; get_all_weighted_subgraph_monomorphisms(const Circuit &amp;circ_, const std::vector&lt; WeightedEdge &gt; &amp;weighted_pattern_edges, bool return_best) const</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00174">GraphPlacement.cpp:174</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a7b77fe1699a9e57b3a56ae3dcd27bc7b"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a7b77fe1699a9e57b3a56ae3dcd27bc7b">tket::GraphPlacement::default_pattern_weighting</a></div><div class="ttdeci">const std::vector&lt; WeightedEdge &gt; default_pattern_weighting(const Circuit &amp;circuit) const</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00041">GraphPlacement.cpp:41</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_a7e9fee414fc2ca1cd9da7cac090872a6"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#a7e9fee414fc2ca1cd9da7cac090872a6">tket::GraphPlacement::GraphPlacement</a></div><div class="ttdeci">GraphPlacement(const Architecture &amp;_architecture, unsigned maximum_matches=2000, unsigned timeout=100, unsigned maximum_pattern_gates=100, unsigned maximum_pattern_depth=100)</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00024">GraphPlacement.cpp:24</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_aa6f61871a2d0a34880a969c132db94c3"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#aa6f61871a2d0a34880a969c132db94c3">tket::GraphPlacement::construct_target_graph</a></div><div class="ttdeci">Architecture construct_target_graph(const std::vector&lt; WeightedEdge &gt; &amp;edges, unsigned distance) const</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00148">GraphPlacement.cpp:148</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ab3c086711791c2c390538a94c75ce1f9"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ab3c086711791c2c390538a94c75ce1f9">tket::GraphPlacement::maximum_pattern_gates_</a></div><div class="ttdeci">unsigned maximum_pattern_gates_</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00189">Placement.hpp:189</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ac7c24555c712b35ee6e4b6fab6e94572"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ac7c24555c712b35ee6e4b6fab6e94572">tket::GraphPlacement::maximum_pattern_depth_</a></div><div class="ttdeci">unsigned maximum_pattern_depth_</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00190">Placement.hpp:190</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ad62015700235b0826df7e467d3a0c1db"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ad62015700235b0826df7e467d3a0c1db">tket::GraphPlacement::weighted_target_edges</a></div><div class="ttdeci">std::vector&lt; WeightedEdge &gt; weighted_target_edges</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00192">Placement.hpp:192</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ad79aae61b575cd0ee94248d47847eeb4"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ad79aae61b575cd0ee94248d47847eeb4">tket::GraphPlacement::maximum_matches_</a></div><div class="ttdeci">unsigned maximum_matches_</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00187">Placement.hpp:187</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_adda2a7d7a7eeba77a81b4f52619fd44e"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#adda2a7d7a7eeba77a81b4f52619fd44e">tket::GraphPlacement::timeout_</a></div><div class="ttdeci">unsigned timeout_</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00188">Placement.hpp:188</a></div></div>
<div class="ttc" id="aclasstket_1_1GraphPlacement_html_ae480869ab1b7d7a338a49082b81720ce"><div class="ttname"><a href="classtket_1_1GraphPlacement.html#ae480869ab1b7d7a338a49082b81720ce">tket::GraphPlacement::convert_bimap</a></div><div class="ttdeci">std::map&lt; Qubit, Node &gt; convert_bimap(boost::bimap&lt; Qubit, Node &gt; &amp;bimap, const QubitGraph::UndirectedConnGraph &amp;pattern_graph) const</div><div class="ttdef"><b>Definition:</b> <a href="GraphPlacement_8cpp_source.html#l00288">GraphPlacement.cpp:288</a></div></div>
<div class="ttc" id="aclasstket_1_1Node_html"><div class="ttname"><a href="classtket_1_1Node.html">tket::Node</a></div><div class="ttdoc">Architectural qubit location.</div><div class="ttdef"><b>Definition:</b> <a href="UnitID_8hpp_source.html#l00226">UnitID.hpp:226</a></div></div>
<div class="ttc" id="aclasstket_1_1Placement_html_a403971b9f46cc27f8ef461bdcda28ac8"><div class="ttname"><a href="classtket_1_1Placement.html#a403971b9f46cc27f8ef461bdcda28ac8">tket::Placement::architecture_</a></div><div class="ttdeci">Architecture architecture_</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00098">Placement.hpp:98</a></div></div>
<div class="ttc" id="aclasstket_1_1QubitGraph_html"><div class="ttname"><a href="classtket_1_1QubitGraph.html">tket::QubitGraph</a></div><div class="ttdoc">Instance of DirectedGraph to hold dependencies between Qubit UnitID objects as given from some Circui...</div><div class="ttdef"><b>Definition:</b> <a href="QubitGraph_8hpp_source.html#l00025">QubitGraph.hpp:25</a></div></div>
<div class="ttc" id="aclasstket_1_1UnitID_html"><div class="ttname"><a href="classtket_1_1UnitID.html">tket::UnitID</a></div><div class="ttdoc">Location holding a bit or qubit of information.</div><div class="ttdef"><b>Definition:</b> <a href="UnitID_8hpp_source.html#l00065">UnitID.hpp:65</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1AbstractGraph_html_a20fd7f5841f214f8e7ac4bfe09a40c24"><div class="ttname"><a href="classtket_1_1graphs_1_1AbstractGraph.html#a20fd7f5841f214f8e7ac4bfe09a40c24">tket::graphs::AbstractGraph::get_all_nodes_vec</a></div><div class="ttdeci">std::vector&lt; T &gt; get_all_nodes_vec() const</div><div class="ttdoc">All nodes as a vector.</div><div class="ttdef"><b>Definition:</b> <a href="AbstractGraph_8hpp_source.html#l00070">AbstractGraph.hpp:70</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1AbstractGraph_html_ac76d6e2555455487441603e255b6251c"><div class="ttname"><a href="classtket_1_1graphs_1_1AbstractGraph.html#ac76d6e2555455487441603e255b6251c">tket::graphs::AbstractGraph::node_exists</a></div><div class="ttdeci">bool node_exists(const T &amp;node) const</div><div class="ttdoc">Check if a node exists.</div><div class="ttdef"><b>Definition:</b> <a href="AbstractGraph_8hpp_source.html#l00064">AbstractGraph.hpp:64</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraphBase_html_a193968d86fec74d5a4f1b2afdb1b0656"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraphBase.html#a193968d86fec74d5a4f1b2afdb1b0656">tket::graphs::DirectedGraphBase::edge_exists</a></div><div class="ttdeci">bool edge_exists(const T &amp;node1, const T &amp;node2) const override</div><div class="ttdoc">Test whether two nodes are connected.</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00102">DirectedGraph.hpp:102</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraphBase_html_a6cd3759fc85904c19421f96f380bd29f"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraphBase.html#a6cd3759fc85904c19421f96f380bd29f">tket::graphs::DirectedGraphBase::UndirectedConnGraph</a></div><div class="ttdeci">boost::adjacency_list&lt; boost::setS, boost::vecS, boost::undirectedS, T, WeightedEdge &gt; UndirectedConnGraph</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00059">DirectedGraph.hpp:60</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraphBase_html_ac76a46f446777f3195ff2834303839d1"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraphBase.html#ac76a46f446777f3195ff2834303839d1">tket::graphs::DirectedGraphBase::get_neighbour_nodes</a></div><div class="ttdeci">std::set&lt; T &gt; get_neighbour_nodes(const T &amp;node) const</div><div class="ttdoc">Get all neighbours of a node.</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00314">DirectedGraph.hpp:314</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraphBase_html_afd4e9113cd43e281793b7e8405930041"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraphBase.html#afd4e9113cd43e281793b7e8405930041">tket::graphs::DirectedGraphBase::get_out_degree</a></div><div class="ttdeci">unsigned get_out_degree(const T &amp;node) const</div><div class="ttdoc">Get the out-degree of a node.</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00195">DirectedGraph.hpp:195</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_a6153644c140f51d101d243812072003d"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#a6153644c140f51d101d243812072003d">tket::graphs::DirectedGraph::get_distance</a></div><div class="ttdeci">unsigned get_distance(const T &amp;node1, const T &amp;node2) const override</div><div class="ttdoc">Get the distance between two nodes.</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00428">DirectedGraph.hpp:428</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_a8d3d82f0ae953281ebf989922671499d"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#a8d3d82f0ae953281ebf989922671499d">tket::graphs::DirectedGraph::get_undirected_connectivity</a></div><div class="ttdeci">const UndirectedConnGraph &amp; get_undirected_connectivity() const &amp;</div><div class="ttdoc">Return an unweighted undirected graph with the same connectivity.</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00478">DirectedGraph.hpp:478</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_a9e7872be30722a2d779e30be4877d34f"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#a9e7872be30722a2d779e30be4877d34f">tket::graphs::DirectedGraph::add_node</a></div><div class="ttdeci">void add_node(const T &amp;node)</div><div class="ttdoc">Add a node to the graph.</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00503">DirectedGraph.hpp:503</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_abc2adbe1c2545b28c4f95848140410f6"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#abc2adbe1c2545b28c4f95848140410f6">tket::graphs::DirectedGraph::add_connection</a></div><div class="ttdeci">void add_connection(const T &amp;node1, const T &amp;node2, unsigned weight=1)</div><div class="ttdoc">Add a (weighted) edge between two nodes.</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00515">DirectedGraph.hpp:515</a></div></div>
<div class="ttc" id="aclasstket_1_1graphs_1_1DirectedGraph_html_ad9e850ec5258cc85dfa8258a96946eaa"><div class="ttname"><a href="classtket_1_1graphs_1_1DirectedGraph.html#ad9e850ec5258cc85dfa8258a96946eaa">tket::graphs::DirectedGraph::get_diameter</a></div><div class="ttdeci">unsigned get_diameter() override</div><div class="ttdoc">Diameter of graph.</div><div class="ttdef"><b>Definition:</b> <a href="DirectedGraph_8hpp_source.html#l00447">DirectedGraph.hpp:447</a></div></div>
<div class="ttc" id="anamespacetket_1_1graphs_1_1utils_html_a0ddb76f99e73585abb2f33d56bd69710"><div class="ttname"><a href="namespacetket_1_1graphs_1_1utils.html#a0ddb76f99e73585abb2f33d56bd69710">tket::graphs::utils::edge</a></div><div class="ttdeci">detail::edge&lt; T &gt; edge</div><div class="ttdef"><b>Definition:</b> <a href="Utils_8hpp_source.html#l00039">Utils.hpp:39</a></div></div>
<div class="ttc" id="anamespacetket_html"><div class="ttname"><a href="namespacetket.html">tket</a></div><div class="ttdoc">Defines tket::DeviceCharacterisation, used in NoiseAwarePlacement and in commute_SQ_gates_through_SWA...</div><div class="ttdef"><b>Definition:</b> <a href="Path_8hpp_source.html#l00020">Path.hpp:20</a></div></div>
<div class="ttc" id="anamespacetket_html_a0bf6a146dadc36738e597ab8892a09f5"><div class="ttname"><a href="namespacetket.html#a0bf6a146dadc36738e597ab8892a09f5">tket::Vertex</a></div><div class="ttdeci">boost::graph_traits&lt; DAG &gt;::vertex_descriptor Vertex</div><div class="ttdef"><b>Definition:</b> <a href="DAGDefs_8hpp_source.html#l00072">DAGDefs.hpp:72</a></div></div>
<div class="ttc" id="anamespacetket_html_a13e81344da4794f2648eb9a7b286fcf3a48656da7a6e48c6887d94f4c69c731b6"><div class="ttname"><a href="namespacetket.html#a13e81344da4794f2648eb9a7b286fcf3a48656da7a6e48c6887d94f4c69c731b6">tket::OpType::Barrier</a></div><div class="ttdeci">@ Barrier</div><div class="ttdoc">No-op that must be preserved by compilation.</div></div>
<div class="ttc" id="anamespacetket_html_a4c73a949b027dea7f23b1d5a1bdd526ea033b1e7914d380b381c8b7f9f131328d"><div class="ttname"><a href="namespacetket.html#a4c73a949b027dea7f23b1d5a1bdd526ea033b1e7914d380b381c8b7f9f131328d">tket::EdgeType::Quantum</a></div><div class="ttdeci">@ Quantum</div><div class="ttdoc">A wire carrying quantum information, corresponding to some allocated Qubit.</div></div>
<div class="ttc" id="anamespacetket_html_a6a99d9f2b64decd8803090cc890e1e7d"><div class="ttname"><a href="namespacetket.html#a6a99d9f2b64decd8803090cc890e1e7d">tket::Edge</a></div><div class="ttdeci">boost::graph_traits&lt; DAG &gt;::edge_descriptor Edge</div><div class="ttdef"><b>Definition:</b> <a href="DAGDefs_8hpp_source.html#l00090">DAGDefs.hpp:90</a></div></div>
<div class="ttc" id="anamespacetket_html_a814cee1be1a70fcc4a804f93212b5013"><div class="ttname"><a href="namespacetket.html#a814cee1be1a70fcc4a804f93212b5013">tket::EdgeVec</a></div><div class="ttdeci">std::vector&lt; Edge &gt; EdgeVec</div><div class="ttdef"><b>Definition:</b> <a href="DAGDefs_8hpp_source.html#l00095">DAGDefs.hpp:95</a></div></div>
<div class="ttc" id="anamespacetket_html_afc84ec8492376a2e6899ad546c0068cc"><div class="ttname"><a href="namespacetket.html#afc84ec8492376a2e6899ad546c0068cc">tket::get_weighted_subgraph_monomorphisms</a></div><div class="ttdeci">std::vector&lt; boost::bimap&lt; Qubit, Node &gt; &gt; get_weighted_subgraph_monomorphisms(QubitGraph::UndirectedConnGraph &amp;pattern_graph, Architecture::UndirectedConnGraph &amp;target_graph, unsigned max_matches, unsigned timeout_ms, bool return_best)</div><div class="ttdoc">Solves the pure unweighted subgraph monomorphism problem, trying to embed the pattern graph into the ...</div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1Frontier_html"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1Frontier.html">tket::GraphPlacement::Frontier</a></div><div class="ttdoc">Holds information for slice wise iteration of Circuit.</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00123">Placement.hpp:123</a></div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1Frontier_html_a8157dc19c01a7d3d8e2d3a1f80212bac"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1Frontier.html#a8157dc19c01a7d3d8e2d3a1f80212bac">tket::GraphPlacement::Frontier::slice</a></div><div class="ttdeci">std::shared_ptr&lt; Slice &gt; slice</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00125">Placement.hpp:125</a></div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1Frontier_html_aa7d289d592cefe5ff849fdf318a7e47a"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1Frontier.html#aa7d289d592cefe5ff849fdf318a7e47a">tket::GraphPlacement::Frontier::quantum_out_edges</a></div><div class="ttdeci">std::shared_ptr&lt; unit_frontier_t &gt; quantum_out_edges</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00129">Placement.hpp:129</a></div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1Frontier_html_adf2553bf6c3a7da9837983c335ee43ce"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1Frontier.html#adf2553bf6c3a7da9837983c335ee43ce">tket::GraphPlacement::Frontier::next_slicefrontier</a></div><div class="ttdeci">void next_slicefrontier()</div><div class="ttdef"><b>Definition:</b> <a href="Frontier_8cpp_source.html#l00041">Frontier.cpp:41</a></div></div>
<div class="ttc" id="astructtket_1_1GraphPlacement_1_1WeightedEdge_html"><div class="ttname"><a href="structtket_1_1GraphPlacement_1_1WeightedEdge.html">tket::GraphPlacement::WeightedEdge</a></div><div class="ttdoc">Holds information for constructing a weighted edge in a QubitGraph.</div><div class="ttdef"><b>Definition:</b> <a href="Placement_8hpp_source.html#l00112">Placement.hpp:112</a></div></div>
<div class="ttc" id="astructtket_1_1TagKey_html"><div class="ttname"><a href="structtket_1_1TagKey.html">tket::TagKey</a></div><div class="ttdef"><b>Definition:</b> <a href="SequencedContainers_8hpp_source.html#l00025">SequencedContainers.hpp:25</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
