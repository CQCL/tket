#!/usr/bin/env python

# Extract the root package path from the json output of `conan create`.

# Usage: ./rootpath <json_file> <package_name>

import json
import sys

jsonfile = sys.argv[1]
name = sys.argv[2]

with open(jsonfile, "r") as f:
    info = json.load(f)

assert "graph" in info.keys()
# generated by conan 2 with `--format json`
nodes = [node for node in info["graph"]["nodes"] if node["ref"].startswith(f"{name}/")]
assert len(nodes) == 1
node = nodes[0]
print(node["package_folder"])
